[gd_scene load_steps=17 format=3 uid="uid://bkv58dnhepail"]

[ext_resource type="Material" uid="uid://2lf4rxb6y477" path="res://Materials/Floor.tres" id="1_xpl50"]
[ext_resource type="PackedScene" uid="uid://ca53pcskbfcnn" path="res://Prefabs/Player/player_3d.tscn" id="3_n1m62"]
[ext_resource type="Shader" uid="uid://bn7ril86qwtly" path="res://Shaders/edge_detection.gdshader" id="4_n53el"]
[ext_resource type="Script" uid="uid://bd046eokvcnu2" path="res://addons/phantom_camera/scripts/phantom_camera_host/phantom_camera_host.gd" id="4_tvnyb"]
[ext_resource type="Script" uid="uid://csjccrhj5wnx7" path="res://addons/phantom_camera/scripts/phantom_camera/phantom_camera_3d.gd" id="5_xpl50"]
[ext_resource type="Script" uid="uid://8umksf8e80fw" path="res://addons/phantom_camera/scripts/resources/tween_resource.gd" id="6_n53el"]
[ext_resource type="Script" uid="uid://b8hhnqsugykly" path="res://addons/phantom_camera/scripts/resources/camera_3d_resource.gd" id="6_xpl50"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_ythbg"]

[sub_resource type="Sky" id="Sky_oc6bj"]
sky_material = SubResource("ProceduralSkyMaterial_ythbg")

[sub_resource type="Environment" id="Environment_gycof"]
background_mode = 2
sky = SubResource("Sky_oc6bj")

[sub_resource type="BoxMesh" id="BoxMesh_xpl50"]
size = Vector3(5, 0.5, 5)

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_n53el"]
data = PackedVector3Array(-2.5, 0.25, 2.5, 2.5, 0.25, 2.5, -2.5, -0.25, 2.5, 2.5, 0.25, 2.5, 2.5, -0.25, 2.5, -2.5, -0.25, 2.5, 2.5, 0.25, -2.5, -2.5, 0.25, -2.5, 2.5, -0.25, -2.5, -2.5, 0.25, -2.5, -2.5, -0.25, -2.5, 2.5, -0.25, -2.5, 2.5, 0.25, 2.5, 2.5, 0.25, -2.5, 2.5, -0.25, 2.5, 2.5, 0.25, -2.5, 2.5, -0.25, -2.5, 2.5, -0.25, 2.5, -2.5, 0.25, -2.5, -2.5, 0.25, 2.5, -2.5, -0.25, -2.5, -2.5, 0.25, 2.5, -2.5, -0.25, 2.5, -2.5, -0.25, -2.5, 2.5, 0.25, 2.5, -2.5, 0.25, 2.5, 2.5, 0.25, -2.5, -2.5, 0.25, 2.5, -2.5, 0.25, -2.5, 2.5, 0.25, -2.5, -2.5, -0.25, 2.5, 2.5, -0.25, 2.5, -2.5, -0.25, -2.5, 2.5, -0.25, 2.5, 2.5, -0.25, -2.5, -2.5, -0.25, -2.5)

[sub_resource type="QuadMesh" id="QuadMesh_nrevq"]
flip_faces = true
size = Vector2(2, 2)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_n7yiw"]
render_priority = 0
shader = ExtResource("4_n53el")
shader_parameter/lightIntensity = 1.0
shader_parameter/lineAlpha = 0.5
shader_parameter/useLighting = true
shader_parameter/lineHighlight = 0.2
shader_parameter/lineShadow = 0.1

[sub_resource type="Resource" id="Resource_nrevq"]
script = ExtResource("6_n53el")
duration = 1.0
transition = 0
ease = 2

[sub_resource type="Resource" id="Resource_n53el"]
script = ExtResource("6_xpl50")
keep_aspect = 1
cull_mask = 1048575
h_offset = 0.0
v_offset = 0.0
projection = 1
fov = 75.0
size = 3.0
frustum_offset = Vector2(0, 0)
near = 0.05
far = 50.0
metadata/_custom_type_script = "uid://b8hhnqsugykly"

[node name="Tutorial" type="Node3D"]

[node name="SubViewportContainer" type="SubViewportContainer" parent="."]
texture_filter = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
stretch = true
stretch_shrink = 5

[node name="SubViewport" type="SubViewport" parent="SubViewportContainer"]
handle_input_locally = false
size = Vector2i(230, 129)
render_target_update_mode = 4

[node name="Environment" type="Node3D" parent="SubViewportContainer/SubViewport"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="SubViewportContainer/SubViewport/Environment"]
environment = SubResource("Environment_gycof")

[node name="Lighting" type="Node" parent="SubViewportContainer/SubViewport/Environment"]

[node name="SpotLight3D" type="SpotLight3D" parent="SubViewportContainer/SubViewport/Environment/Lighting"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 2.65967, 0)
shadow_enabled = true

[node name="Sun" type="DirectionalLight3D" parent="SubViewportContainer/SubViewport/Environment"]
transform = Transform3D(0.92388, -0.213994, 0.317259, 0, 0.829037, 0.559193, -0.382683, -0.516627, 0.765931, 0, 4.07738, 0)
light_energy = 0.0
shadow_enabled = true
shadow_opacity = 0.7
shadow_blur = 0.1
directional_shadow_mode = 0
directional_shadow_fade_start = 1.0
directional_shadow_max_distance = 30.0

[node name="Map" type="Node3D" parent="SubViewportContainer/SubViewport"]

[node name="StaticBody3D" type="StaticBody3D" parent="SubViewportContainer/SubViewport/Map"]

[node name="MeshInstance3D" type="MeshInstance3D" parent="SubViewportContainer/SubViewport/Map/StaticBody3D"]
mesh = SubResource("BoxMesh_xpl50")
surface_material_override/0 = ExtResource("1_xpl50")

[node name="CollisionShape3D" type="CollisionShape3D" parent="SubViewportContainer/SubViewport/Map/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_n53el")

[node name="MainCamera3D" type="Camera3D" parent="SubViewportContainer/SubViewport"]
unique_name_in_owner = true
physics_interpolation_mode = 1
transform = Transform3D(0.707107, -0.353553, 0.612372, 0, 0.866025, 0.5, -0.707107, -0.353553, 0.612372, 2.25, 2.58081, 1.72738)
projection = 1
size = 3.0
far = 50.0

[node name="PhantomCameraHost" type="Node" parent="SubViewportContainer/SubViewport/MainCamera3D"]
process_priority = 300
process_physics_priority = 300
script = ExtResource("4_tvnyb")
metadata/_custom_type_script = "uid://bd046eokvcnu2"

[node name="EdgeDetection" type="MeshInstance3D" parent="SubViewportContainer/SubViewport/MainCamera3D"]
extra_cull_margin = 16384.0
mesh = SubResource("QuadMesh_nrevq")
surface_material_override/0 = SubResource("ShaderMaterial_n7yiw")

[node name="PlayerGroup" type="Node" parent="SubViewportContainer/SubViewport"]

[node name="PlayerPhantom" type="Node3D" parent="SubViewportContainer/SubViewport/PlayerGroup" node_paths=PackedStringArray("follow_target")]
unique_name_in_owner = true
transform = Transform3D(0.707107, -0.353553, 0.612372, 0, 0.866025, 0.5, -0.707107, -0.353553, 0.612372, 2.25, 2.58081, 1.72738)
top_level = true
script = ExtResource("5_xpl50")
priority = 10
follow_mode = 2
follow_target = NodePath("../Player3D")
tween_resource = SubResource("Resource_nrevq")
camera_3d_resource = SubResource("Resource_n53el")
follow_offset = Vector3(2.25, 2, 2.25)
metadata/_custom_type_script = "uid://csjccrhj5wnx7"

[node name="Player3D" parent="SubViewportContainer/SubViewport/PlayerGroup" instance=ExtResource("3_n1m62")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.580806, -0.522617)
